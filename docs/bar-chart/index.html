<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Responsive Two Columns</title>
    <link rel="stylesheet" href="styles.css"> <!-- Link to external CSS file -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Barlow:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Google Font -->
</head>

<body>
    <div class="content">
        <div class="container">
            <div class="left-column prop-box" data-threshold="true">
                <div class="prop" data-proposition="A">
                    <h3>Proposition A to recall Supervisor Engardio</h3>
                    <div class="bar-chart"></div>
                    <p class="required">
                        Needs 50% + 1 to pass.
                        <span id="turnout"></span>
                    </p>

                </div>
            </div>
        </div>
    </div>
    <div id="last-updated" style="text-align:center; font-family:'Barlow', sans-serif; font-size:0.9em; color:#555;">
        Last updated: <span id="update-date">September 15, 2025 06:42 PM PDT</span>
    </div>

    <!-- <script>
        // Display today's date in a readable format
        const now = new Date();
        const options = { year: 'numeric', month: 'long', day: 'numeric', hour: '2-digit', minute: '2-digit' };
        document.getElementById('update-date').textContent = now.toLocaleDateString('en-US', options);
    </script> -->

    <script>
        d3.csv("data.csv").then(data => {
            console.log(data); // debug: see rows in console

            // Find the row for Proposition A
            const propA = data.find(d => d.proposition === "A");

            console.log("Found row:", propA); // debug

            if (propA && propA.turnout) {
                // Format turnout as percentage
                const turnoutVal = parseFloat(propA.turnout).toFixed(1) + "%";

                // Put it in the page
                document.getElementById("turnout").textContent = `Current turnout: ${turnoutVal}`;
            }
        });
    </script>

    <script src="script.js"></script> <!-- Link to external JavaScript file -->
    <script type="text/javascript" src="https://pym.nprapps.org/pym.v1.min.js"></script>


</body>

</html>